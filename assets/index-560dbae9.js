import{s as x,g as w,a as L,b as O}from"./firebase-de2b4286.js";document.addEventListener("keydown",e=>{e.key=="l"&&x()});document.querySelectorAll(".shopItem");let n={Name:"",halftimeFacilitator:"",tigerBucks:0};const k=document.getElementById("bucks-count");setTimeout(async()=>{n=await w(),console.log(n,"student"),k.textContent=`${n.TigerBucks} Tiger Bucks`},1e3);let d=[{type:"",max:0}],g=new Map;async function M(){d=await L(),g=await O(),A()}M();let C=0,b=0,v=0;const f=new Date,B=f.toLocaleDateString();console.log(B);let y=f.getHours()+":"+f.getMinutes()+":"+f.getSeconds();y=Y(y);let P=B+" - "+y;function Y(e){let t=e.split(":");var a=Number(t[0]),s=Number(t[1]),l=Number(t[2]),r;return a>0&&a<=12?r=""+a:a>12?r=""+(a-12):a==0&&(r="12"),r+=s<10?":0"+s:":"+s,r+=l<10?":0"+l:":"+l,r+=a>=12?" P.M.":" A.M.",r}let m=[];function A(){console.log(g,"item list"),g.forEach(e=>{const t=document.createElement("section");t.classList.add("shopItem");const a=document.createElement("div");a.classList.add("imageDiv");const s=document.createElement("img");s.classList.add("itemImage"),s.src=e.Image,a.appendChild(s);const l=document.createElement("label");l.classList.add("itemName"),l.textContent=e.Name;const r=document.createElement("br"),p=document.createElement("label");p.classList.add("itemPrice"),p.textContent=`${e.Price} Tiger Bucks`;const N=document.createElement("br"),c=document.createElement("button");c.classList.add("addToCart"),c.id=e.Name,c.textContent="Add to Cart",c.dataset.type=e.ItemType,c.addEventListener("click",S=>{let o=g.get(S.target.id),h=o.ItemType,i=o.Price;if(console.log(b),parseInt(i)>parseInt(n.TigerBucks)){alert("You only have "+n.TigerBucks+" tiger bucks and you need "+i+" tiger bucks");return}if(o.Name=="Trust Card"){m=[];let u={itemName:o.Name,itemCount:1};m.push(u),n.TigerBucks-=i,k.textContent=`${n.TigerBucks} Tiger Bucks`,alert("You bought "+o.Name+" for "+i+" tiger bucks!"),document.getElementById("store").remove(),document.getElementById("cart").style.visibility="visible",loadShopCart();return}let E=o.InventoryAmount;if(parseInt(E)<=0){alert("Sorry, we are out of "+o.Name);return}if(h=="School"){if(v>=d.get("School").Max){alert("You have bought the max number of school items!");return}v++}else if(h=="Snacks"){if(b>=d.get("Snacks").Max){alert("You have bought the max number of snacks!");return}b++}else if(h=="Raffle"){if(C>=d.get("Raffle").Max){alert("You have bought the max number of raffle tickets!");return}C++}o.InventoryAmount-=1,console.log(i,"item price"),n.TigerBucks-=i;let I={itemName:o.Name,itemCount:1,itemPrice:i},T=!1;m.forEach(u=>{u.itemName==I.itemName&&(u.itemCount++,T=!0)}),T||m.push(I),k.textContent=`${n.TigerBucks} Tiger Bucks`,alert("You bought "+o.Name+" for "+i+" tiger bucks!"),console.log(m)}),t.appendChild(a),t.appendChild(l),t.appendChild(r),t.appendChild(p),t.appendChild(N),t.appendChild(c),console.log(e,"item"),console.log(e.ItemType),document.getElementById(e.ItemType).appendChild(t)})}const D=document.getElementById("reviewOrderBtn");D.addEventListener("click",()=>{localStorage.setItem("order",JSON.stringify(m)),localStorage.setItem("student",JSON.stringify(n)),localStorage.setItem("date",P),window.location.href="/NewTigerStore/ReviewOrder/"});
