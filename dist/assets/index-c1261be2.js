import{s as C,g as x,a as L,b as O}from"./firebase-94ba1475.js";document.addEventListener("keydown",e=>{e.key=="l"&&C()});document.querySelectorAll(".shopItem");let a={Name:"",halftimeFacilitator:"",tigerBucks:0};const k=document.getElementById("bucks-count"),M=document.getElementById("log-out");setTimeout(async()=>{a=await x(),console.log(a,"student"),k.textContent=`${a.TigerBucks} Tiger Bucks`},1e3);let u=[{type:"",max:0}],g=new Map;async function P(){u=await L(),g=await O(),D()}P();let v=0,y=0,B=0;const f=new Date,N=f.toLocaleDateString();console.log(N);let b=f.getHours()+":"+f.getMinutes()+":"+f.getSeconds();b=A(b);let Y=N+" - "+b;function A(e){let t=e.split(":");var n=Number(t[0]),s=Number(t[1]),l=Number(t[2]),i;return n>0&&n<=12?i=""+n:n>12?i=""+(n-12):n==0&&(i="12"),i+=s<10?":0"+s:":"+s,i+=l<10?":0"+l:":"+l,i+=n>=12?" P.M.":" A.M.",i}let m=[];function D(){console.log(g,"item list"),g.forEach(e=>{const t=document.createElement("section");t.classList.add("shopItem");const n=document.createElement("div");n.classList.add("imageDiv");const s=document.createElement("img");s.classList.add("itemImage"),s.src=e.Image,n.appendChild(s);const l=document.createElement("label");l.classList.add("itemName"),l.textContent=e.Name;const i=document.createElement("br"),p=document.createElement("label");p.classList.add("itemPrice"),p.textContent=`${e.Price} Tiger Bucks`;const S=document.createElement("br"),c=document.createElement("button");c.classList.add("addToCart"),c.id=e.Name,c.textContent="Add to Cart",c.dataset.type=e.ItemType,c.addEventListener("click",E=>{let o=g.get(E.target.id),h=o.ItemType,r=o.Price;if(console.log(y),parseInt(r)>parseInt(a.TigerBucks)){alert("You only have "+a.TigerBucks+" tiger bucks and you need "+r+" tiger bucks");return}if(o.Name=="Trust Card"){m=[];let d={itemName:o.Name,itemCount:1};m.push(d),a.TigerBucks-=r,k.textContent=`${a.TigerBucks} Tiger Bucks`,alert("You bought "+o.Name+" for "+r+" tiger bucks!"),document.getElementById("store").remove(),document.getElementById("cart").style.visibility="visible",loadShopCart();return}let w=o.InventoryAmount;if(parseInt(w)<=0){alert("Sorry, we are out of "+o.Name);return}if(h=="School"){if(B>=u.get("School").Max){alert("You have bought the max number of school items!");return}B++}else if(h=="Snacks"){if(y>=u.get("Snacks").Max){alert("You have bought the max number of snacks!");return}y++}else if(h=="Raffle"){if(v>=u.get("Raffle").Max){alert("You have bought the max number of raffle tickets!");return}v++}o.InventoryAmount-=1,console.log(r,"item price"),a.TigerBucks-=r;let I={itemName:o.Name,itemCount:1,itemPrice:r},T=!1;m.forEach(d=>{d.itemName==I.itemName&&(d.itemCount++,T=!0)}),T||m.push(I),k.textContent=`${a.TigerBucks} Tiger Bucks`,alert("You bought "+o.Name+" for "+r+" tiger bucks!"),console.log(m)}),t.appendChild(n),t.appendChild(l),t.appendChild(i),t.appendChild(p),t.appendChild(S),t.appendChild(c),console.log(e,"item"),console.log(e.ItemType),document.getElementById(e.ItemType).appendChild(t)})}const $=document.getElementById("reviewOrderBtn");$.addEventListener("click",()=>{localStorage.setItem("order",JSON.stringify(m)),localStorage.setItem("student",JSON.stringify(a)),localStorage.setItem("date",Y),window.location.href="/NewTigerStore/ReviewOrder/"});M.addEventListener("click",async function(){await C(),window.location.href="/NewTigerStore/SignIn/"});
