import{l as I,e as y,b as p,f as T,h as v,i as B,j as L,k as f,m as C,n as h}from"./firebase-b3471a88.js";const A=document.getElementById("orderTable"),b=document.getElementById("clear-orders"),w=document.getElementById("sixthGrade"),H=document.getElementById("seventhGrade"),M=document.getElementById("eigthGrade"),N=document.getElementById("add-student"),k=document.getElementById("show-add-student-prompt"),_=document.getElementById("itemsTable"),D=document.getElementById("show-add-item-prompt"),S=document.getElementById("add-item"),u=document.getElementById("edit-item-prompt"),P=document.getElementById("edit-item"),E=document.querySelectorAll(".tablink");let g=[];window.addEventListener("load",async function(){let t=await I(),e=await y();g=await p(),console.log(t,"students"),console.log(e,"orders"),console.log(g,"items"),R(e),O(t),G()});function R(t){for(let e=0;e<t.length;e++){let n=t[e],l=A.insertRow(-1),i=l.insertCell(0),d=l.insertCell(1),a=l.insertCell(2),c=l.insertCell(3),r=l.insertCell(4),s=l.insertCell(5),m=l.insertCell(6),o=document.createElement("button");o.innerHTML="Delete",o.classList.add("action-btn"),o.setAttribute("data-order-id",n.orderId),o.addEventListener("click",x),m.appendChild(o),i.innerHTML=n.orderTimestamp,d.innerHTML=n.orderName,a.innerHTML=n.orderFacilitator,c.innerHTML=n.orderItems[0]?n.orderItems[0].itemName:"None",r.innerHTML=n.orderItems[1]?n.orderItems[1].itemName:"None",s.innerHTML=n.orderItems[2]?n.orderItems[2].itemName:"None"}}function O(t){for(let e=0;e<t.length;e++){let n=t[e];console.log(n,"student");const l=document.createElement("input");if(l.setAttribute("data-email",n.Email),l.setAttribute("type","number"),l.setAttribute("value",n.TigerBucks),l.setAttribute("min","0"),console.log(l,"tigerInputElement"),l.addEventListener("change",async function(){let i=l.value,d=l.getAttribute("data-email");await T(d,i)}),n.Grade=="6"){let i=w.insertRow(-1),d=i.insertCell(0),a=i.insertCell(1);d.innerHTML=n.Name,a.appendChild(l)}else if(n.Grade=="7"){let i=H.insertRow(-1),d=i.insertCell(0),a=i.insertCell(1);d.innerHTML=n.Name,a.appendChild(l)}else if(n.Grade=="8"){let i=M.insertRow(-1),d=i.insertCell(0),a=i.insertCell(1);d.innerHTML=n.Name,a.appendChild(l)}}}function G(){g.forEach(t=>{let e=_.insertRow(-1),n=e.insertCell(0),l=e.insertCell(1),i=e.insertCell(2),d=e.insertCell(3),a=e.insertCell(4),c=e.insertCell(5);n.innerHTML=t.Name,l.innerHTML=t.Price,i.innerHTML=t.InventoryAmount,d.innerHTML=t.ItemType;let r=document.createElement("img");r.setAttribute("src",t.Image),r.setAttribute("width","100px"),a.appendChild(r);let s=document.createElement("button");s.innerHTML="Edit",s.classList.add("action-btn"),s.setAttribute("data-item-id",t.Name),s.addEventListener("click",F),c.appendChild(s);let m=document.createElement("button");m.innerHTML="Delete",m.classList.add("action-btn"),m.setAttribute("data-item-id",t.Name),m.addEventListener("click",U),c.appendChild(m)})}b.addEventListener("click",async function(){await v(),location.reload()});N.addEventListener("click",async function(){console.log("Add Student");let t=document.getElementById("student-name").value,e=document.getElementById("student-email").value,n=document.getElementById("student-grade").value,l=document.getElementById("student-facilitator").value,i=document.getElementById("student-trust-card").checked,d=document.getElementById("student-bucks").value,a={Name:t,Email:e,Grade:n,HalftimeFacilitator:l,TigerBucks:d,hasTrustCard:i};if(console.log(a,"student"),t==""||e==""||n==""||l==""||d==""){alert("Please fill out all fields");return}await B(a),location.reload()});k.addEventListener("click",function(){document.getElementById("add-student-prompt").classList.remove("inactive"),document.getElementById("add-student-prompt").classList.add("active"),document.getElementById("add-student-prompt").classList.contains("hidden")&&document.getElementById("add-student-prompt").classList.remove("hidden")});D.addEventListener("click",function(){document.getElementById("add-item-prompt").classList.remove("inactive"),document.getElementById("add-item-prompt").classList.add("active"),document.getElementById("add-item-prompt").classList.contains("hidden")&&document.getElementById("add-item-prompt").classList.remove("hidden")});S.addEventListener("click",async function(){let t=document.getElementById("item-name").value,e=document.getElementById("item-price").value,n=document.getElementById("item-quantity").value,l=document.getElementById("item-type").value,i=document.getElementById("item-image").files[0];if(t==""||e==""||n==""||i==""){alert("Please fill out all fields");return}await L({Name:t,Price:e,InventoryAmount:n,ItemType:l},i),location.reload()});function q(){u.classList.remove("inactive"),u.classList.add("active"),u.classList.contains("hidden")&&u.classList.remove("hidden")}P.addEventListener("click",async function(){let t=document.getElementById("edit-item-name").value,e=document.getElementById("edit-item-price").value,n=document.getElementById("edit-item-quantity").value,l=document.getElementById("edit-item-type").value,i=document.getElementById("edit-item-image").files[0];if(t==""||e==""||n==""){alert("Please fill out all fields");return}let d={Name:t,Price:e,InventoryAmount:n,ItemType:l},a=!1;i!=null&&(a=!0,console.log("changed image")),await f(d,i,a),location.reload()});async function F(t){let e=t.target.getAttribute("data-item-id"),n=g.get(e);console.log(n,"item"),document.getElementById("edit-item-name").value=n.Name,document.getElementById("edit-item-price").value=n.Price,document.getElementById("edit-item-quantity").value=n.InventoryAmount,document.getElementById("edit-item-type").value=n.ItemType,q()}async function U(t){let e=t.target.getAttribute("data-item-id");await C(e),location.reload()}async function x(t){let e=t.target.getAttribute("data-order-id");await h(e),location.reload()}E.forEach(t=>{t.addEventListener("click",function(){console.log(t.getAttribute("data-tab")),E.forEach(e=>{e.classList.remove("selected")}),t.classList.add("selected"),document.querySelectorAll(".tab").forEach(e=>{e.classList.contains("visible")&&(e.classList.remove("visible"),e.classList.add("invisible"))}),document.querySelector("."+t.getAttribute("data-tab")).classList.add("visible"),document.querySelector("."+t.getAttribute("data-tab")).classList.remove("invisible")})});
