import{l as I,f as y,b as p,h as T,i as v,j as B,k as L,m as f,n as C,o as h,s as A}from"./firebase-94ba1475.js";const b=document.getElementById("orderTable"),w=document.getElementById("clear-orders"),H=document.getElementById("sixthGrade"),N=document.getElementById("seventhGrade"),M=document.getElementById("eigthGrade"),k=document.getElementById("add-student"),_=document.getElementById("show-add-student-prompt"),S=document.getElementById("itemsTable"),D=document.getElementById("show-add-item-prompt"),O=document.getElementById("add-item"),u=document.getElementById("edit-item-prompt"),P=document.getElementById("edit-item"),E=document.querySelectorAll(".tablink"),R=document.getElementById("log-out");let g=[];window.addEventListener("load",async function(){let t=await I(),e=await y();g=await p(),console.log(t,"students"),console.log(e,"orders"),console.log(g,"items"),G(e),q(t),U()});function G(t){for(let e=0;e<t.length;e++){let n=t[e],l=b.insertRow(-1),i=l.insertCell(0),d=l.insertCell(1),a=l.insertCell(2),c=l.insertCell(3),o=l.insertCell(4),s=l.insertCell(5),m=l.insertCell(6),r=document.createElement("button");r.innerHTML="Delete",r.classList.add("action-btn"),r.setAttribute("data-order-id",n.orderId),r.addEventListener("click",W),m.appendChild(r),i.innerHTML=n.orderTimestamp,d.innerHTML=n.orderName,a.innerHTML=n.orderFacilitator,c.innerHTML=n.orderItems[0]?n.orderItems[0].itemName:"None",o.innerHTML=n.orderItems[1]?n.orderItems[1].itemName:"None",s.innerHTML=n.orderItems[2]?n.orderItems[2].itemName:"None"}}function q(t){for(let e=0;e<t.length;e++){let n=t[e];console.log(n,"student");const l=document.createElement("input");if(l.setAttribute("data-email",n.Email),l.setAttribute("type","number"),l.setAttribute("value",n.TigerBucks),l.setAttribute("min","0"),console.log(l,"tigerInputElement"),l.addEventListener("change",async function(){let i=l.value,d=l.getAttribute("data-email");await T(d,i)}),n.Grade=="6"){let i=H.insertRow(-1),d=i.insertCell(0),a=i.insertCell(1);d.innerHTML=n.Name,a.appendChild(l)}else if(n.Grade=="7"){let i=N.insertRow(-1),d=i.insertCell(0),a=i.insertCell(1);d.innerHTML=n.Name,a.appendChild(l)}else if(n.Grade=="8"){let i=M.insertRow(-1),d=i.insertCell(0),a=i.insertCell(1);d.innerHTML=n.Name,a.appendChild(l)}}}function U(){g.forEach(t=>{let e=S.insertRow(-1),n=e.insertCell(0),l=e.insertCell(1),i=e.insertCell(2),d=e.insertCell(3),a=e.insertCell(4),c=e.insertCell(5);n.innerHTML=t.Name,l.innerHTML=t.Price,i.innerHTML=t.InventoryAmount,d.innerHTML=t.ItemType;let o=document.createElement("img");o.setAttribute("src",t.Image),o.setAttribute("width","100px"),a.appendChild(o);let s=document.createElement("button");s.innerHTML="Edit",s.classList.add("action-btn"),s.setAttribute("data-item-id",t.Name),s.addEventListener("click",x),c.appendChild(s);let m=document.createElement("button");m.innerHTML="Delete",m.classList.add("action-btn"),m.setAttribute("data-item-id",t.Name),m.addEventListener("click",Q),c.appendChild(m)})}w.addEventListener("click",async function(){await v(),location.reload()});k.addEventListener("click",async function(){console.log("Add Student");let t=document.getElementById("student-name").value,e=document.getElementById("student-email").value,n=document.getElementById("student-grade").value,l=document.getElementById("student-facilitator").value,i=document.getElementById("student-trust-card").checked,d=document.getElementById("student-bucks").value,a={Name:t,Email:e,Grade:n,HalftimeFacilitator:l,TigerBucks:d,hasTrustCard:i};if(console.log(a,"student"),t==""||e==""||n==""||l==""||d==""){alert("Please fill out all fields");return}await B(a),location.reload()});_.addEventListener("click",function(){document.getElementById("add-student-prompt").classList.remove("inactive"),document.getElementById("add-student-prompt").classList.add("active"),document.getElementById("add-student-prompt").classList.contains("hidden")&&document.getElementById("add-student-prompt").classList.remove("hidden")});D.addEventListener("click",function(){document.getElementById("add-item-prompt").classList.remove("inactive"),document.getElementById("add-item-prompt").classList.add("active"),document.getElementById("add-item-prompt").classList.contains("hidden")&&document.getElementById("add-item-prompt").classList.remove("hidden")});O.addEventListener("click",async function(){let t=document.getElementById("item-name").value,e=document.getElementById("item-price").value,n=document.getElementById("item-quantity").value,l=document.getElementById("item-type").value,i=document.getElementById("item-image").files[0];if(t==""||e==""||n==""||i==""){alert("Please fill out all fields");return}await L({Name:t,Price:e,InventoryAmount:n,ItemType:l},i),location.reload()});function F(){u.classList.remove("inactive"),u.classList.add("active"),u.classList.contains("hidden")&&u.classList.remove("hidden")}P.addEventListener("click",async function(){let t=document.getElementById("edit-item-name").value,e=document.getElementById("edit-item-price").value,n=document.getElementById("edit-item-quantity").value,l=document.getElementById("edit-item-type").value,i=document.getElementById("edit-item-image").files[0];if(t==""||e==""||n==""){alert("Please fill out all fields");return}let d={Name:t,Price:e,InventoryAmount:n,ItemType:l},a=!1;i!=null&&(a=!0,console.log("changed image")),await f(d,i,a),location.reload()});async function x(t){let e=t.target.getAttribute("data-item-id"),n=g.get(e);console.log(n,"item"),document.getElementById("edit-item-name").value=n.Name,document.getElementById("edit-item-price").value=n.Price,document.getElementById("edit-item-quantity").value=n.InventoryAmount,document.getElementById("edit-item-type").value=n.ItemType,F()}async function Q(t){let e=t.target.getAttribute("data-item-id");await C(e),location.reload()}async function W(t){let e=t.target.getAttribute("data-order-id");await h(e),location.reload()}E.forEach(t=>{t.addEventListener("click",function(){console.log(t.getAttribute("data-tab")),E.forEach(e=>{e.classList.remove("selected")}),t.classList.add("selected"),document.querySelectorAll(".tab").forEach(e=>{e.classList.contains("visible")&&(e.classList.remove("visible"),e.classList.add("invisible"))}),document.querySelector("."+t.getAttribute("data-tab")).classList.add("visible"),document.querySelector("."+t.getAttribute("data-tab")).classList.remove("invisible")})});R.addEventListener("click",async function(){await A(),window.location.href="/NewTigerStore/SignIn/"});
